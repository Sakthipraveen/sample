---
  - hosts: all
    become: true
    gather_facts: True
    tasks:
      - name: install apache on redhat or centos instances
        yum: name=httpd state=present
        when: ansible_os_family == "RedHat"

      - name: install apache on debian or ubuntu instances
        apt: name=apache2 state=present
        when: ansible_os_family == "Debian"

      - name: enable apache on startup and start service for redhat or centos
        service: name=httpd enabled=yes state=started
        when: ansible_os_family == "RedHat"

      - name: enable apache on startup and start service for debian or ubuntu
        service: name=apache2 enabled=yes state=started
        when: ansible_os_family == "Debian"

  - hosts: slave
    become: True
    tasks:
      - name: pull an image
        shell: docker pull sakthipraveen/devops:22356c53ab39a94d2eb0b1142b567b3eab280539

      - name: docker install on slave
        
        yum:
          name: docker
          state: present
          enabled: true
